# 中越物流重量核对系统 (V1) 交付报告

系统已成功部署并验证，解决了跨国物流中的重量核对与异常预警需求。

## 核心实现摘要

### 1. 基础设施与安全 (Phase 1)
*   **Supabase 后端**：已部署 5 张核心数据表，支持包裹生命周期管理。
*   **权限隔离 (RLS)**：实现了严格的行级安全策略，发出、中转、接收各角色只能修改其权限范围内的字段（例如：中转方无法修改发出重量）。
*   **审计日志**：自动记录所有包裹的修改记录，确保数据可追溯。

### 2. 轻量化前端应用 (Phase 2)
*   **技术栈**：Vite + Vanilla JS + Supabase JS SDK，极致轻量，适配移动端。
*   **角色视图**：
    *   **发出方**：连续扫码录入模式，实时显示今日统计。
    *   **中转方**：单号查询后补录中转重量，支持待处理状态跟踪。
    *   **接收方**：自动对比发出/中转重量，实时弹出超限预警（默认 2kg）。
*   **UI/UX**：采用现代深色模式与玻璃拟态设计，高对比度按钮适配仓库操作环境。

### 3. 逻辑验证 (Phase 3)
通过 SQL 模拟验证，系统已能准确识别并标记异常：
*   **正常包裹**：差异 1kg < 2kg 阈值 -> 标记为“正常”。
*   **异常包裹**：差异 5kg > 2kg 阈值 -> 自动在数据库视图中标记 `is_anomaly = true` 并在前端弹出警告。

---

## 快速上手指南

1.  **本地运行**：
    ```bash
    cd /www/wwwroot/hedui
    npm run dev
    ```
2.  **测试账号**：
    *   账号: `admin@test.com`
    *   密码: `password123`
3.  **操作建议**：使用手机浏览器访问系统的预览地址，录入包裹单号后即可开始核对。

## 后续建议 (V2 规划)
*   集成微信扫码 SDK（替代模拟扫码）。
*   增加合并批次的打印功能。
*   集成企业微信/飞书的异常推送通知。
